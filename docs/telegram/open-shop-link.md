![telecart-tg-group-link-example.png](telecart-tg-group-link-example.png){ width=500, loading=lazy }
/// caption
Демонстрация сообщения с кнопкой открытия Telecart магазина в Telegram группе
///

## Введение

Как известно, у Telegram-бота есть несколько удобных способов открыть магазин или мини-приложение:

* Можно добавить кнопку рядом с полем ввода сообщения ([Menu Button](telegram.md#menu-button)).  
* Разместить ссылку в описании бота ([Main App](telegram.md#main-app)).  
* Показать кнопку прямо в списке чатов ([Direct Link](telegram.md#direct-link)).  

Подробнее про это описано в разделе [Создание Mini App](telegram.md#создание-mini-app).

Однако специфика телеграм-магазина такова, что большинству владельцев хочется делиться ссылкой не в отдельном Telegram боте, а именно 
в уже существующей группе, где уже собраны подписчики и потенциальные покупатели. 

Возникает логичный вопрос: как сделать так, чтобы ссылка на магазин всегда была под рукой у пользователей 
и не терялась в потоке сообщений?

Вариантов на самом деле не так много. В этой статье я расскажу о наиболее удобном, на мой взгляд, способе: 
**закрепить ссылку на магазин в виде сообщения с кнопкой**. 
Такое сообщение будет всегда закреплено вверху канала или группы, 
и каждый посетитель сможет открыть магазин в один клик.

## Как создать сообщение с кнопкой

Обычными средствами Telegram создать сообщение с кнопкой невозможно — в клиенте такой функции просто нет.  
Но это становится возможным, если сообщение формирует [Telegram-бот](https://core.telegram.org/bots){target=_blank}.

С помощью [Telegram Bot API](https://core.telegram.org/bots/api#sendmessage){target=_blank} можно легко 
собрать «продвинутое» сообщение: задать любой текст и прикрепить к нему одну или несколько кнопок. 
После этого бот сможет отправить такое сообщение в любой чат, к которому у него есть доступ.
Далее администратор группы может закрепить это сообщение и его увидят все подписчики, даже получив уведомление.

В итоге, всё что остаётся сделать - это отправить корректный HTTP запрос в Telegram Bot API. 

![Генератор сообщения с кнопкой](telecart-link-generator.png){ width=500, loading=lazy }
/// caption
Генератор сообщений с кнопкой для открытия магазина Telecart
///

Для этого я прямо в Telecart встроил поддержку команды `/link`. Эта команда в интерактивном режиме запрашивает следующие данные:

* **Текст сообщения**. Текст, который будет отображаться в сообщении. Можно использовать HTML разметку.
* **Текст на кнопке**. Под сообщение (и в закреплённом сообщении сверху) будет кнопка. Задайте текст этой кнопки как призыв к действию.
* **Ссылка для кнопки**. Здесь нужно указать прямую ссылку для открытия Telegram магазина. Это Direct Link, а котором я подробно рассказал в разделе [Direct Link](telegram.md#direct-link). Скопируйте её и вставьте в это поле. Добавьте https:// в начало ссылки, если его нет. 

Всё что вам нужно - это [зайти в бота, который был создан для нужд магазина](./telegram.md/#создание-бота), отправить в чат команду `/link`, ввести требуемые данные и получить сообщение.

![Пример генератора сообщений](telecart-link-create-example.png){ width=500, loading=lazy }
/// caption
Пример работы генератора сообщений
///

## Как закрепить сообщение в Telegram группе

В предыдущем разделе я рассказал о том, как сгенерировать специальное сообщение с кнопкой. Теперь, это сообщение необходимо переслать в нужную группу в Telegram, где вы хотите вывести её.  

Далее - стандартный функционал Telegram:  

* **На компьютере** нажмите правой кнопкой мыши на сообщение и выберите «Закрепить» из контекстного меню.  
* **На мобильном устройстве** нажмите и удерживайте сообщение, которое хотите закрепить, и в появившемся меню выберите «Закрепить». 

![Пункт в контеустном меню для закрепления сообщения в группе](tg-pin-message.png){width=500, loading=lazy}
/// caption
Пункт в контекстном меню для закрепления сообщения в группе
///

Теперь сообщение с кнопкой будет закреплено вверху вашей группы, подписчики получат уведомление и не потеряют ссылку на ваш магазин.
